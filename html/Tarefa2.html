<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa2</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Tarefa2</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>Nesta tarefa, definimos o resultado da movimenta&#231;&#227;o de um jogador num estado de jogo</p><pre>play :: Play -&gt; State -&gt; State</pre><h1>Objetivo</h1><p>Para percebermos o efeito da jogada pretendida no jogo come&#231;amos por
perceber se o jogador vai apenas mudar de dire&#231;&#227;o ou se vai avan&#231;ar.
Se ele for avan&#231;ar, procura-se ver se este ir&#225; ao encontro de outro jogador,
aplicando as respetivas consequ&#234;ncias se tal acontecer.</p><p>De seguida, move-se o jogador alterando o estado do jogo de acordo com a pe&#231;a que
se encontra no posi&#231;&#227;o seguinte</p><p>Finalmente, verifica-se tamb&#233;m se as comidas todas do labirinto j&#225; foram comidas,
se for o caso, o n&#237;vel muda. Consequentemente, o tempoMega do pacman diminui, a velocidade
dos fantasmas no modo Alive aumenta e o labrinto &#233; atualizado para um labirinto
pr&#233;-definido.</p><h1>Discuss&#227;o e conclus&#227;o</h1><p>Consider&#225;mos que a velocidade dos fantasmas &#224; medida que os n&#237;veis passam aumenta
0.5, no entanto, para um m&#225;ximo de 2, porque se n&#227;o o pacman morriria muito rapidamente.
Al&#233;m disso, o tempoMega tamb&#233;m diminui, mas para um m&#237;nimo de 5 segundos, para n&#227;o
tornar o jogo demasiado dif&#237;cil.</p><p>Ap&#243;s testar os diferentes cen&#225;rios poss&#237;veis, conclu&#237;mos que o nossa fun&#231;&#227;o comporta-se como esperado.  </p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:play">play</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:play_">play_</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:separaPlayers">separaPlayers</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; (<a href="Types.html#t:Player" title="Types">Player</a>, [<a href="Types.html#t:Player" title="Types">Player</a>])</li><li class="src short"><a href="#v:isDying">isDying</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Bool</li><li class="src short"><a href="#v:playersInCoords">playersInCoords</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; ([<a href="Types.html#t:Player" title="Types">Player</a>], [<a href="Types.html#t:Player" title="Types">Player</a>])</li><li class="src short"><a href="#v:mudaPlayers">mudaPlayers</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; (<a href="Types.html#t:Player" title="Types">Player</a>, [<a href="Types.html#t:Player" title="Types">Player</a>])</li><li class="src short"><a href="#v:vAlive">vAlive</a> :: Int -&gt; Double</li><li class="src short"><a href="#v:proximoMovimento">proximoMovimento</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:tempoML">tempoML</a> :: Int -&gt; Double</li><li class="src short"><a href="#v:avancaPosicao">avancaPosicao</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:changeMouth">changeMouth</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:somaPontos">somaPontos</a> :: Int -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a></li><li class="src short"><a href="#v:ghostsDead">ghostsDead</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:inserePlayer">inserePlayer</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:mudarDeNivel">mudarDeNivel</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a></li><li class="src short"><a href="#v:comComida">comComida</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Bool</li><li class="src short"><a href="#v:mudaVelocidadeP">mudaVelocidadeP</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>]</li><li class="src short"><a href="#v:mudaMaze">mudaMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:play" class="def">play</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:play" class="selflink">#</a></p><div class="doc"><p>Move um jogador (identificado pelo seu identificador &#250;nico (ID))
numa determinada dire&#231;&#227;o e atualizando o efeito dessa jogada no labirinto atual</p></div></div><div class="top"><p class="src"><a id="v:play_" class="def">play_</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:play_" class="selflink">#</a></p><div class="doc"><p>Verifica se um jogador se movimenta numa dire&#231;&#227;o que n&#227;o a sua dire&#231;&#227;o atual, se for o caso
 a sua posi&#231;&#227;o mant&#234;m-se apenas se altera a orienta&#231;&#227;o</p><p>Se n&#227;o for o caso, descobre se existe algum/alguns jogadores na posi&#231;&#227;o para onde se move.
 Se n&#227;o existirem este apenas avan&#231;a de posi&#231;&#227;o, alterando possivelmente alguns dos seus
 atributos consoante a pe&#231;a que se encontra nesta mesma posi&#231;&#227;o
 Se existirem este altera os atributos dos jogadores que se encontram e, de seguida, faz algo semelhante
 ao caso anterior, ou seja, avan&#231;a de posi&#231;&#227;o e sofre algumas altera&#231;&#245;es consoante a pe&#231;a que se
 encontra na posi&#231;&#227;o para onde se move </p></div></div><div class="top"><p class="src"><a id="v:separaPlayers" class="def">separaPlayers</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; (<a href="Types.html#t:Player" title="Types">Player</a>, [<a href="Types.html#t:Player" title="Types">Player</a>]) <a href="#v:separaPlayers" class="selflink">#</a></p><div class="doc"><p>Separa o jogador que se vai mover dos restantes</p></div></div><div class="top"><p class="src"><a id="v:isDying" class="def">isDying</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Bool <a href="#v:isDying" class="selflink">#</a></p><div class="doc"><p>V&#234; se se trata de um pacman no modo Dying</p></div></div><div class="top"><p class="src"><a id="v:playersInCoords" class="def">playersInCoords</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; ([<a href="Types.html#t:Player" title="Types">Player</a>], [<a href="Types.html#t:Player" title="Types">Player</a>]) <a href="#v:playersInCoords" class="selflink">#</a></p><div class="doc"><p>Divide os jogadores que se encontram numas certas coordenadas c dos restantes</p><p>Podia tamb&#233;m ser definida sa seguinte forma:</p><pre>playersInCoords c = (filter ((== c).(getPlayerCoords)) ,filter ((/= c).(getPlayerCoords)) )</pre></div></div><div class="top"><p class="src"><a id="v:mudaPlayers" class="def">mudaPlayers</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; (<a href="Types.html#t:Player" title="Types">Player</a>, [<a href="Types.html#t:Player" title="Types">Player</a>]) <a href="#v:mudaPlayers" class="selflink">#</a></p><div class="doc"><p>Altera o estado dos jogadores quando eles se cruzam, consoante o estado de cada um</p><ul><li>Quando um Pacman encontra um ghost no modo Alive, pode acontecer uma de duas coisas.
Se este ainda tiver vidas, perde uma vida . Se o Pacman j&#225; n&#227;o tiver vidas, este altera o seu estado para Dying</li><li>Quando um Pacman encontra um ghost no modo Dead, este obtem +10 pontos, enquanto que o ghost desaparece, reeaparecendo
dentro da casa dos fantasmas em modo Alive</li></ul></div></div><div class="top"><p class="src"><a id="v:vAlive" class="def">vAlive</a> :: Int -&gt; Double <a href="#v:vAlive" class="selflink">#</a></p><div class="doc"><p>Retorna a velocidade com que o fantasma fica quando passa ao
modo Alive, de acordo com o n&#237;vel do jogo </p></div></div><div class="top"><p class="src"><a id="v:proximoMovimento" class="def">proximoMovimento</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:Piece" title="Types">Piece</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:proximoMovimento" class="selflink">#</a></p><div class="doc"><p>Retorna um State de acordo com o player dado e com a pe&#231;a dada (pe&#231;a que se encontra na posi&#231;&#227;o para onde se move)</p><p><strong> Se o jogador for um pacman: </strong></p><ul><li>Quando transita para uma posi&#231;&#227;o vazia, nada acontece;</li><li>Quando transita para uma posi&#231;&#227;o com comida pequena, a sua pontua&#231;&#227;o &#233; atualizada com +1 ponto;</li><li>Quando transita para uma posi&#231;&#227;o com comida grande,
a sua pontua&#231;&#227;o &#233; atualizada com +5 pontos, o seu estado muda para Mega e o timeMega muda para tMega.
Al&#233;m disso, os fantasmas existentes no labirinto mudam o seu estado para Dead
e diminuem a sua velocidade para metade.</li><li>Quando a pe&#231;a dada for uma parede, este n&#227;o altera a sua posi&#231;&#227;o</li></ul></div></div><div class="top"><p class="src"><a id="v:tempoML" class="def">tempoML</a> :: Int -&gt; Double <a href="#v:tempoML" class="selflink">#</a></p><div class="doc"><p>Calcula o tempo que o Pacman fica no modo Mega ap&#243;s comer uma comida grande
 (que vai diminuindo com as passagens de n&#237;vel)</p></div></div><div class="top"><p class="src"><a id="v:avancaPosicao" class="def">avancaPosicao</a> :: <a href="Types.html#t:Play" title="Types">Play</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Int -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:avancaPosicao" class="selflink">#</a></p><div class="doc"><p>Retorna um estado ap&#243;s avan&#231;ar o jogador um casa (deixando a posi&#231;&#227;o onde estava com a pe&#231;a Empty)</p></div></div><div class="top"><p class="src"><a id="v:changeMouth" class="def">changeMouth</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:changeMouth" class="selflink">#</a></p><div class="doc"><p>Altera o estado da boca do Pacman</p></div></div><div class="top"><p class="src"><a id="v:somaPontos" class="def">somaPontos</a> :: Int -&gt; <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:Player" title="Types">Player</a> <a href="#v:somaPontos" class="selflink">#</a></p><div class="doc"><p>Soma x pontos ao jogador</p></div></div><div class="top"><p class="src"><a id="v:ghostsDead" class="def">ghostsDead</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:ghostsDead" class="selflink">#</a></p><div class="doc"><p>Altera o estado de todos os fantasmas para Dead e diminui a sua velocidade para metade</p><p><strong>Obs:</strong> considera que todos os jogadores dados s&#227;o fantasmas </p></div></div><div class="top"><p class="src"><a id="v:inserePlayer" class="def">inserePlayer</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:inserePlayer" class="selflink">#</a></p><div class="doc"><p>Insere um jogador numa lista e jogadores de forma a que na lsita resultante os IDs dos jogadores
 apare&#231;am por ordem crescente</p></div></div><div class="top"><p class="src"><a id="v:mudarDeNivel" class="def">mudarDeNivel</a> :: <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> <a href="#v:mudarDeNivel" class="selflink">#</a></p><div class="doc"><p>Atualiza o estado do jogo para a mudan&#231;a de n&#237;vel, aumentando a velocidade dos fantasmas
 e atualizando o labirinto </p></div></div><div class="top"><p class="src"><a id="v:comComida" class="def">comComida</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; Bool <a href="#v:comComida" class="selflink">#</a></p><div class="doc"><p>Verifica se ainda existe alguma comida no labirinto</p></div></div><div class="top"><p class="src"><a id="v:mudaVelocidadeP" class="def">mudaVelocidadeP</a> :: [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] <a href="#v:mudaVelocidadeP" class="selflink">#</a></p><div class="doc"><p>Muda a velocidade dos fantasmas (quando se muda de n&#237;vel) e a posi&#231;&#227;o dos diferentes jogadores.
 O pacman vai para uma posi&#231;&#227;o central, por baixo da casa dos fantasmas e os fantasmas
 aparecem numa das posi&#231;&#245;es poss&#237;veis dentro da casa dos fantasmas, aleatoriamente.</p></div></div><div class="top"><p class="src"><a id="v:mudaMaze" class="def">mudaMaze</a> :: <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> <a href="#v:mudaMaze" class="selflink">#</a></p><div class="doc"><p>Retorna o labirinto do novo n&#237;vel</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>