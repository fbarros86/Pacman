<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa6</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Tarefa6</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Introdu&#231;&#227;o</h1><p>Nesta tarefa implementamos um rob&#244;/bot que joga Pacman automaticamente.
Este, a partir do inteiro e do estado do jogo que recebe,
analisa o que o rodeia e procura tomar a melhor decis&#227;o. </p><h1>Objetivos</h1><p>O objetivo do nosso bot &#233; tentar obter a maior pontua&#231;&#227;o poss&#237;vel. Para tal,
definimos uma estrat&#233;gia para cada situa&#231;&#227;o do jogo.</p><p>Consideramos que quando o Pacman se encontra no modo Normal, este apenas se vai
dirigir para a comida mais pr&#243;xima se n&#227;o existir nenhum fantasma por perto
(cujo caminho mais curto tem uma dist&#226;ncia inferior a 5). Se existir, este
afasta-se dele.</p><p>Quando o Pacman est&#225; no modo Mega este come&#231;a por procurar fantasmas no modo Dead
ao seu redor (que este consiga atingir com o tempo Mega que lhe resta e cuja dist&#226;ncia
&#233; menor que 5). Se encontrar algum dirige-se para ele, caso contr&#225;rio tem um comportamento
id&#234;ntico ao Pacman no modo Normal.</p><h1>Discuss&#227;o e conclus&#227;o</h1><p>Ap&#243;s testar a efic&#225;cia do bot percebemos que ele inicialmente toma boas decis&#245;es, mas
&#224; medida que o jogo vai avan&#231;ando este come&#231;a a ter menos op&#231;&#245;es, porque a comida do
labirinto j&#225; &#233; limitada, e come&#231;a a ter mais dificuldades.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:bot">bot</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:jogaOuNao">jogaOuNao</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:jogadaBot">jogadaBot</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:botNormal">botNormal</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:ghostsMaisProx">ghostsMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)]</li><li class="src short"><a href="#v:temGhostAlive">temGhostAlive</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool</li><li class="src short"><a href="#v:temGhost">temGhost</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool</li><li class="src short"><a href="#v:mudaPossib">mudaPossib</a> :: Double -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)]</li><li class="src short"><a href="#v:comidaMaisProx">comidaMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:decideOrientacao">decideOrientacao</a> :: [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:getRandomElem">getRandomElem</a> :: [<a href="Types.html#t:Orientation" title="Types">Orientation</a>] -&gt; IO <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:orientDiferentes">orientDiferentes</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [<a href="Types.html#t:Orientation" title="Types">Orientation</a>]</li><li class="src short"><a href="#v:maisLonge">maisLonge</a> :: [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; (Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>) -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a></li><li class="src short"><a href="#v:botMega">botMega</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a></li><li class="src short"><a href="#v:getMoves">getMoves</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Double</li><li class="src short"><a href="#v:ghostMaisProx">ghostMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Double -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; Maybe <a href="Types.html#t:Orientation" title="Types">Orientation</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:bot" class="def">bot</a> :: Int -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:bot" class="selflink">#</a></p><div class="doc"><p>Em cada instante, o rob&#244; tem apenas conhecimento do identificador do jogador a movimentar
e do estado atual do jogo. Com esta informa&#231;&#227;o, o rob&#244; vai decidir se quer efetuar alguma
jogada ou n&#227;o, consoante a estrat&#233;gia delineada.</p></div></div><div class="top"><p class="src"><a id="v:jogaOuNao" class="def">jogaOuNao</a> :: <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> -&gt; Maybe <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:jogaOuNao" class="selflink">#</a></p><div class="doc"><p>Verifica se a jogada p encontrado como sendo a ideal altera o comportamento
 normal do Pacman (mover-se na dire&#231;&#227;o atual). Devolvendo Nothing caso n&#227;o altere nada
 e caso contr&#225;rio devolve Just p</p></div></div><div class="top"><p class="src"><a id="v:jogadaBot" class="def">jogadaBot</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:jogadaBot" class="selflink">#</a></p><div class="doc"><p>Procura o jogada ideal para o jogador p dado, utilizando diferentes estrat&#233;gias
 consoante o seu estado</p></div></div><div class="top"><p class="src"><a id="v:botNormal" class="def">botNormal</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:botNormal" class="selflink">#</a></p><div class="doc"><p>Com o objetivo de retornar a melhor jogada que o Pacman pode fazer quando est&#225; no modo Normal,
primeiro verifica-se se existe algum fantasma cujo comprimento de caminho mais curto seja
menor que a distGhost (definida nos Types). Se existirem fantasmas ele procura a melhor forma de se afastar deles.
Se n&#227;o existirem o Pacman apenas procura dirigir-se para a comida mais pr&#243;xima.</p></div></div><div class="top"><p class="src"><a id="v:ghostsMaisProx" class="def">ghostsMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] <a href="#v:ghostsMaisProx" class="selflink">#</a></p><div class="doc"><p>Retorna a lista dos pares com as orienta&#231;&#245;es e o tamanho do caminho que
levam o Pacman a chegar a um fantasma (Alive).
Para as descobrir &#233; usado o algoritmo Breadth-First, ou seja, a partir de uma posi&#231;&#227;o inicial vai se vendo
quais os s&#237;tios que se pode alcan&#231;ar at&#233; chegar ao objetivo, neste caso o objetivo &#233; a distancia ultrapassar
a distGhost</p></div></div><div class="top"><p class="src"><a id="v:temGhostAlive" class="def">temGhostAlive</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool <a href="#v:temGhostAlive" class="selflink">#</a></p><div class="doc"><p>Dada uma posi&#231;&#227;o c e uma lista de jogadores, verifica se em c existe algum fantasma no modo Alive</p></div></div><div class="top"><p class="src"><a id="v:temGhost" class="def">temGhost</a> :: <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Bool <a href="#v:temGhost" class="selflink">#</a></p><div class="doc"><p>Dada uma posi&#231;&#227;o c e uma lista de jogadores, verifica se em c existe algum fantasma</p></div></div><div class="top"><p class="src"><a id="v:mudaPossib" class="def">mudaPossib</a> :: Double -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] <a href="#v:mudaPossib" class="selflink">#</a></p><div class="doc"><p>Dado um n&#250;mero x, acrescenta a cada par esse n&#250;mero (tranformando o par
 num triplo. Al&#233;m disso,
 consoante a orienta&#231;&#227;o dada, muda ou n&#227;o as orienta&#231;&#245;es dos elementos da lista</p></div></div><div class="top"><p class="src"><a id="v:comidaMaisProx" class="def">comidaMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:comidaMaisProx" class="selflink">#</a></p><div class="doc"><p>Com o objetivo de descobrir para que dire&#231;&#227;o o pacman deve ir para se aproximar de uma comida, &#233; utilizado
novamente o algoritmo Breadth-First</p></div></div><div class="top"><p class="src"><a id="v:decideOrientacao" class="def">decideOrientacao</a> :: [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Coords" title="Types">Coords</a> -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:decideOrientacao" class="selflink">#</a></p><div class="doc"><p>Recebe uma lista com as orienta&#231;&#245;es que levar&#227;o o Pacman a encontrar um fantasma,
com a respetiva dist&#226;ncia a este. Com esta informa&#231;&#227;o, procura a melhor forma de evitar os fantasmas.
Se dentro das possibilidades de movimento existirem orienta&#231;&#245;es que n&#227;o est&#227;o
na lista dada, &#233; escolhida uma delas aleatoriamente.
Caso contr&#225;rio, escolhe-se aquela cujo fantasma est&#225; mais longe</p><p><strong>Obs:</strong> Decidimos que a orienta&#231;&#227;o escolhida, quando existe possibilidade de escolha, &#233;
aleat&#243;ria visto que quando experiment&#225;mos escolhendo a primeira, o pacman, numa dada altura
do jogo limitava-se a fugir dos fantasmas, dando voltas ao labirinto at&#233; eventualmente morrer</p></div></div><div class="top"><p class="src"><a id="v:getRandomElem" class="def">getRandomElem</a> :: [<a href="Types.html#t:Orientation" title="Types">Orientation</a>] -&gt; IO <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:getRandomElem" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:orientDiferentes" class="def">orientDiferentes</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; [<a href="Types.html#t:Orientation" title="Types">Orientation</a>] <a href="#v:orientDiferentes" class="selflink">#</a></p><div class="doc"><p>Retorna todos as orienta&#231;&#245;es que aparecem na primeira lista, mas n&#227;o aparecem na segunda</p></div></div><div class="top"><p class="src"><a id="v:maisLonge" class="def">maisLonge</a> :: [(Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; (Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>) -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:maisLonge" class="selflink">#</a></p><div class="doc"><p>Retorna a orienta&#231;&#227;o cujo o n&#250;mero correspondente &#233; o maior</p></div></div><div class="top"><p class="src"><a id="v:botMega" class="def">botMega</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; <a href="Types.html#t:State" title="Types">State</a> -&gt; <a href="Types.html#t:Play" title="Types">Play</a> <a href="#v:botMega" class="selflink">#</a></p><div class="doc"><p>Com o objetivo de retornar a melhor jogada que o Pacman pode fazer quando est&#225; no modo Mega,
primeiro verifica-se se existe algum fantasma Dead cujo comprimento de caminho mais curto seja atingivel no
tempo que resta no modo Mega e menor que a distGhost (definida nos Types). 
Se existir ele procura aproximar-se dele, se n&#227;o ter&#225; um comportamento semelhante ao pacman
quando est&#225; no modo Normal.</p></div></div><div class="top"><p class="src"><a id="v:getMoves" class="def">getMoves</a> :: <a href="Types.html#t:Player" title="Types">Player</a> -&gt; Double <a href="#v:getMoves" class="selflink">#</a></p><div class="doc"><p>Descobre o n&#250;mero de m&#225;ximo de jogadas que queremos analisar consoante o tempo Mega que o pacman ainda tem.
Se der para fazer um n&#250;mero de jogadas igual ou superior &#224; distGhost, paenas devolve a distGhost. Se n&#227;o devolve
o n&#250;mero de jogadas que consegue efetuar</p></div></div><div class="top"><p class="src"><a id="v:ghostMaisProx" class="def">ghostMaisProx</a> :: [(<a href="Types.html#t:Coords" title="Types">Coords</a>, Double, <a href="Types.html#t:Orientation" title="Types">Orientation</a>)] -&gt; <a href="Types.html#t:Maze" title="Types">Maze</a> -&gt; [<a href="Types.html#t:Player" title="Types">Player</a>] -&gt; Double -&gt; <a href="Types.html#t:Orientation" title="Types">Orientation</a> -&gt; Maybe <a href="Types.html#t:Orientation" title="Types">Orientation</a> <a href="#v:ghostMaisProx" class="selflink">#</a></p><div class="doc"><p>Caso exista um fantasma no modo Dead alcan&#231;avel com um n&#250;mero restrito de jogadas (moves)
devolve o orienta&#231;&#227;o que leva o Pacman a este. Caso contr&#225;rio, devolve Nothing.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>